# フォルダ構造説明

**最終更新**: 2025年12月16日

---

## 📁 新しいフォルダ構造

```
画像取得システム/
│
├── 【実行ファイル】ルートディレクトリ
│   ├── 画像一括取得.py          # メインスクリプト（トリガー）
│   ├── urls.txt                 # URLリスト（1行1URL）
│   ├── requirements.txt         # 依存パッケージ
│   ├── README.md                # 使用方法（更新済み）
│   └── README_使い方.txt        # 簡易マニュアル
│
├── extractors/                  # パターンモジュール（自動選択）
│   ├── __init__.py
│   ├── base.py                  # 基底クラスと共通ユーティリティ
│   ├── pattern_detector.py     # パターン判定ロジック
│   ├── pattern_loader.py       # 動的モジュール読み込み
│   ├── pattern_standard.py     # パターン1: .t_h / .t_b 構造
│   ├── pattern_t_b_only.py     # パターン2: .t_b のみ
│   ├── pattern_generic_2ch.py  # パターン3: Generic 2ch blog format
│   ├── pattern_dl_dt_dd.py     # パターン4: dl/dt/dd structure
│   └── pattern_fallback.py     # パターン5: フォールバック
│
├── result_js/                   # 出力フォルダ（統一）
│   ├── log_js.txt               # 実行ログ
│   └── [ページタイトル]/        # 各ページの結果
│       ├── posts.txt            # 投稿内容
│       └── images/               # 画像ファイル
│           ├── 画像1.jpg
│           ├── 画像2.jpg
│           └── ...
│
├── docs/                        # ドキュメント
│   ├── 要件定義.md              # 詳細要件定義（最新仕様）
│   ├── 画像取得システム.md      # 現行仕様（As-Is）
│   ├── 開発ナレッジ.md          # 開発・検証過程の知見
│   └── フォルダ構造説明.md      # このファイル
│
├── backup/                      # バックアップファイル
│   ├── 画像一括取得_フォールバック.py  # 旧フォールバックスクリプト（参考用）
│   ├── result_js_fallback/     # 旧フォールバック結果
│   └── [その他のバックアップファイル]
│
├── build/                       # ビルド関連（EXE化時）
└── dist/                        # 配布用EXE（EXE化時）
```

---

## 🎯 重要なポイント

### 1. 実行に必要なファイル

**最小構成**:
- `画像一括取得.py`（または `画像一括取得.exe`）
- `urls.txt`
- `extractors/` フォルダ（パターンモジュール）

**その他のファイル**: 自動的に読み込まれます

### 2. 出力先

**統一された出力先**: `result_js/`
- すべてのパターンで同じフォルダに出力
- パターン情報はログに記録

### 3. ドキュメント

**`docs/` フォルダ**:
- 要件定義、仕様書、開発ナレッジを整理
- 次回以降の開発・修正時に参照

### 4. バックアップ

**`backup/` フォルダ**:
- 旧フォールバックスクリプト（参考用）
- 過去のバージョンやテスト結果

---

## 🔄 旧システムとの違い

### 旧システム
```
画像取得システム/
├── 画像一括取得.py              # メインスクリプト
├── 画像一括取得_フォールバック.py # フォールバックスクリプト（手動実行）
├── urls.txt
├── result_js/                   # メイン結果
└── result_js_fallback/         # フォールバック結果
```

### 新システム
```
画像取得システム/
├── 画像一括取得.py              # メインスクリプト（トリガー）
├── urls.txt
├── extractors/                  # パターンモジュール（自動選択）
└── result_js/                   # 統一された出力先
```

**主な変更点**:
- ✅ フォールバックスクリプトを削除（パターン選択システムに統合）
- ✅ `extractors/` フォルダでパターンモジュールを管理
- ✅ 出力フォルダを統一（`result_js/`）
- ✅ ドキュメントを `docs/` フォルダに整理

---

## 📝 ファイルの役割

### 実行ファイル（ルート）

| ファイル | 役割 |
|---------|------|
| `画像一括取得.py` | メインスクリプト（トリガー） |
| `urls.txt` | URLリスト（1行1URL） |
| `requirements.txt` | 依存パッケージリスト |
| `README.md` | 使用方法（更新済み） |

### パターンモジュール（extractors/）

| ファイル | 役割 |
|---------|------|
| `base.py` | 基底クラスと共通ユーティリティ |
| `pattern_detector.py` | パターン判定ロジック |
| `pattern_loader.py` | 動的モジュール読み込み |
| `pattern_*.py` | 各パターンの抽出ロジック |

### ドキュメント（docs/）

| ファイル | 役割 |
|---------|------|
| `要件定義.md` | 詳細要件定義（最新仕様） |
| `画像取得システム.md` | 現行仕様（As-Is） |
| `開発ナレッジ.md` | 開発・検証過程の知見 |

---

## 🚀 実行方法

### 基本的な使用方法

1. **`urls.txt` にURLを記述**
   ```
   https://tabinolog.com/archives/16141932.html
   https://tabinolog.com/archives/16142958.html
   ```

2. **`画像一括取得.py` を実行**
   ```bash
   py 画像一括取得.py
   ```

3. **結果を確認**
   - `result_js/` フォルダに結果が保存されます

### 必要なファイルの配置

**必須**:
- `画像一括取得.py`（または `画像一括取得.exe`）
- `urls.txt`
- `extractors/` フォルダ（すべてのパターンモジュール）

**自動読み込み**:
- `extractors/` フォルダ内のモジュールは自動的に読み込まれます
- ユーザーが手動で操作する必要はありません

---

## 💡 整理のポイント

### 整理前の問題点

1. **メモファイルが散在**: 検証過程で作成されたメモファイルがルートに散在
2. **ドキュメントが分散**: 要件定義や仕様書がルートに配置
3. **旧ファイルが残存**: フォールバックスクリプトなど、不要になったファイルが残存
4. **出力フォルダが分離**: メインとフォールバックで出力フォルダが分離

### 整理後の改善点

1. **メモファイルを統合**: `docs/開発ナレッジ.md` にすべての知見をまとめ
2. **ドキュメントを整理**: `docs/` フォルダにドキュメントを集約
3. **旧ファイルを整理**: 不要なファイルを `backup/` に移動
4. **出力フォルダを統一**: すべて `result_js/` に統一

---

## 📚 参考資料

- **`docs/開発ナレッジ.md`**: 開発・検証過程の知見、問題解決のフレームワーク
- **`docs/要件定義.md`**: 最新の要件定義
- **`README.md`**: 使用方法

---

**最終更新**: 2025年12月16日
